output file:
processed_classes-deepchem_compute_tf_loss70.json
function:
_compute_tf_loss
Error Cases:

Pass or Failed: 0

Related Failed Test Cases:
{'../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_l2_loss_tf FAILED [ 72%]', 'FAILED ../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_l2_loss_tf'}

All Test Cases On Generated code:
============================= test session starts ==============================
platform linux -- Python 3.11.10, pytest-8.3.4, pluggy-1.5.0 -- /local/data0/moved_data/publishablew/deepchem/deepchem/venv/bin/python3
cachedir: .pytest_cache
rootdir: /local/data0/moved_data/publishablew/deepchem/deepchem
configfile: setup.cfg
plugins: flaky-3.8.1
collecting ... collected 36 items

../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_GlobalMutualInformation_pytorch PASSED [  2%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_LocalInformation_pytorch PASSED [  5%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_NTXentMultiplePositives_loss PASSED [  8%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_ShannonEntropy_pytorch PASSED [ 11%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_ShannonEntropy_tf PASSED [ 13%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_VAE_ELBO_pytorch PASSED [ 16%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_VAE_ELBO_tf PASSED [ 19%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_VAE_KLDivergence_pytorch PASSED [ 22%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_VAE_KLDivergence_tf PASSED [ 25%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_binary_cross_entropy_pytorch PASSED [ 27%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_binary_cross_entropy_tf PASSED [ 30%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_categorical_cross_entropy_pytorch PASSED [ 33%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_categorical_cross_entropy_tf PASSED [ 36%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_deep_graph_infomax_loss PASSED [ 38%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_get_negative_expectation PASSED [ 41%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_get_positive_expectation PASSED [ 44%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_graph_context_pred_loss PASSED [ 47%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_grover_pretrain_loss PASSED [ 50%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_hinge_loss_pytorch PASSED [ 52%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_hinge_loss_tf PASSED [ 55%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_huber_loss_pytorch PASSED [ 58%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_huber_loss_tf PASSED [ 61%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_l1_loss_pytorch PASSED [ 63%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_l1_loss_tf PASSED [ 66%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_l2_loss_pytorch PASSED [ 69%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_l2_loss_tf FAILED [ 72%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_poisson_loss_pytorch PASSED [ 75%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_poisson_loss_tf FAILED [ 77%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_sigmoid_cross_entropy_pytorch PASSED [ 80%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_sigmoid_cross_entropy_tf PASSED [ 83%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_softmax_cross_entropy_pytorch PASSED [ 86%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_softmax_cross_entropy_tf PASSED [ 88%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_sparse_softmax_cross_entropy_pytorch PASSED [ 91%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_sparse_softmax_cross_entropy_tf PASSED [ 94%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_squared_hinge_loss_pytorch PASSED [ 97%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_squared_hinge_loss_tf PASSED [100%]

=================================== FAILURES ===================================
__________________________ TestLosses.test_l2_loss_tf __________________________

self = <deepchem.models.tests.test_losses.TestLosses testMethod=test_l2_loss_tf>

    @pytest.mark.tensorflow
    def test_l2_loss_tf(self):
        """Test L2Loss."""
        loss = losses.L2Loss()
        outputs = tf.constant([[0.1, 0.8], [0.4, 0.6]])
        labels = tf.constant([[0.0, 1.0], [1.0, 0.0]])
>       result = loss._compute_tf_loss(outputs, labels).numpy()

/local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py:71: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <deepchem.models.losses.L2Loss object at 0x758cb06620d0>
output = <tf.Tensor: shape=(2, 2), dtype=float32, numpy=
array([[0.1, 0.8],
       [0.4, 0.6]], dtype=float32)>
labels = <tf.Tensor: shape=(2, 2), dtype=float32, numpy=
array([[0., 1.],
       [1., 0.]], dtype=float32)>

    def _compute_tf_loss(self, output, labels):
        if output.shape != labels.shape:
            raise ValueError('Output and labels must have the same shape.')
        if not (output.dtype.is_floating and labels.dtype.is_floating):
            raise TypeError('Output and labels must be of float type.')
>       squared_diff = tf.square(output - labels)
E       NameError: name 'tf' is not defined

/local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/losses.py:76: NameError
_______________________ TestLosses.test_poisson_loss_tf ________________________

self = <deepchem.models.tests.test_losses.TestLosses testMethod=test_poisson_loss_tf>

    @pytest.mark.tensorflow
    def test_poisson_loss_tf(self):
        """Test PoissonLoss."""
        loss = losses.PoissonLoss()
        outputs = tf.constant([[0.1, 0.8], [0.4, 0.6]])
        labels = tf.constant([[0.0, 1.0], [1.0, 0.0]])
>       result = loss._compute_tf_loss(outputs, labels).numpy()

/local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py:131: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/losses.py:135: in _compute_tf_loss
    loss = tf.keras.losses.Poisson(reduction='auto')
/local/data0/moved_data/publishablew/deepchem/deepchem/venv/lib/python3.11/site-packages/keras/src/losses/losses.py:570: in __init__
    super().__init__(poisson, name=name, reduction=reduction, dtype=dtype)
/local/data0/moved_data/publishablew/deepchem/deepchem/venv/lib/python3.11/site-packages/keras/src/losses/losses.py:23: in __init__
    super().__init__(name=name, reduction=reduction, dtype=dtype)
/local/data0/moved_data/publishablew/deepchem/deepchem/venv/lib/python3.11/site-packages/keras/src/losses/loss.py:48: in __init__
    self.reduction = standardize_reduction(reduction)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

reduction = 'auto'

    def standardize_reduction(reduction):
        allowed = {
            "sum_over_batch_size",
            "sum",
            None,
            "none",
            "mean",
            "mean_with_sample_weight",
        }
        if reduction not in allowed:
>           raise ValueError(
                "Invalid value for argument `reduction`. "
                f"Expected one of {allowed}. Received: "
                f"reduction={reduction}"
            )
E           ValueError: Invalid value for argument `reduction`. Expected one of {None, 'none', 'mean', 'sum_over_batch_size', 'mean_with_sample_weight', 'sum'}. Received: reduction=auto

/local/data0/moved_data/publishablew/deepchem/deepchem/venv/lib/python3.11/site-packages/keras/src/losses/loss.py:111: ValueError
=========================== short test summary info ============================
FAILED ../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_l2_loss_tf
FAILED ../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_poisson_loss_tf
========================= 2 failed, 34 passed in 5.49s =========================


Final Test Result:
============================= test session starts ==============================
platform linux -- Python 3.11.10, pytest-8.3.4, pluggy-1.5.0 -- /local/data0/moved_data/publishablew/deepchem/deepchem/venv/bin/python3
cachedir: .pytest_cache
rootdir: /local/data0/moved_data/publishablew/deepchem/deepchem
configfile: setup.cfg
plugins: flaky-3.8.1
collecting ... collected 36 items

../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_GlobalMutualInformation_pytorch PASSED [  2%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_LocalInformation_pytorch PASSED [  5%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_NTXentMultiplePositives_loss PASSED [  8%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_ShannonEntropy_pytorch PASSED [ 11%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_ShannonEntropy_tf PASSED [ 13%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_VAE_ELBO_pytorch PASSED [ 16%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_VAE_ELBO_tf PASSED [ 19%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_VAE_KLDivergence_pytorch PASSED [ 22%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_VAE_KLDivergence_tf PASSED [ 25%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_binary_cross_entropy_pytorch PASSED [ 27%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_binary_cross_entropy_tf PASSED [ 30%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_categorical_cross_entropy_pytorch PASSED [ 33%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_categorical_cross_entropy_tf PASSED [ 36%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_deep_graph_infomax_loss PASSED [ 38%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_get_negative_expectation PASSED [ 41%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_get_positive_expectation PASSED [ 44%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_graph_context_pred_loss PASSED [ 47%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_grover_pretrain_loss PASSED [ 50%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_hinge_loss_pytorch PASSED [ 52%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_hinge_loss_tf PASSED [ 55%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_huber_loss_pytorch PASSED [ 58%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_huber_loss_tf PASSED [ 61%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_l1_loss_pytorch PASSED [ 63%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_l1_loss_tf PASSED [ 66%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_l2_loss_pytorch PASSED [ 69%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_l2_loss_tf PASSED [ 72%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_poisson_loss_pytorch PASSED [ 75%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_poisson_loss_tf FAILED [ 77%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_sigmoid_cross_entropy_pytorch PASSED [ 80%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_sigmoid_cross_entropy_tf PASSED [ 83%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_softmax_cross_entropy_pytorch PASSED [ 86%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_softmax_cross_entropy_tf PASSED [ 88%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_sparse_softmax_cross_entropy_pytorch PASSED [ 91%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_sparse_softmax_cross_entropy_tf PASSED [ 94%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_squared_hinge_loss_pytorch PASSED [ 97%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_squared_hinge_loss_tf PASSED [100%]

=================================== FAILURES ===================================
_______________________ TestLosses.test_poisson_loss_tf ________________________

self = <deepchem.models.tests.test_losses.TestLosses testMethod=test_poisson_loss_tf>

    @pytest.mark.tensorflow
    def test_poisson_loss_tf(self):
        """Test PoissonLoss."""
        loss = losses.PoissonLoss()
        outputs = tf.constant([[0.1, 0.8], [0.4, 0.6]])
        labels = tf.constant([[0.0, 1.0], [1.0, 0.0]])
>       result = loss._compute_tf_loss(outputs, labels).numpy()

/local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py:131: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/losses.py:150: in _compute_tf_loss
    loss = tf.keras.losses.Poisson(reduction='auto')
/local/data0/moved_data/publishablew/deepchem/deepchem/venv/lib/python3.11/site-packages/keras/src/losses/losses.py:570: in __init__
    super().__init__(poisson, name=name, reduction=reduction, dtype=dtype)
/local/data0/moved_data/publishablew/deepchem/deepchem/venv/lib/python3.11/site-packages/keras/src/losses/losses.py:23: in __init__
    super().__init__(name=name, reduction=reduction, dtype=dtype)
/local/data0/moved_data/publishablew/deepchem/deepchem/venv/lib/python3.11/site-packages/keras/src/losses/loss.py:48: in __init__
    self.reduction = standardize_reduction(reduction)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

reduction = 'auto'

    def standardize_reduction(reduction):
        allowed = {
            "sum_over_batch_size",
            "sum",
            None,
            "none",
            "mean",
            "mean_with_sample_weight",
        }
        if reduction not in allowed:
>           raise ValueError(
                "Invalid value for argument `reduction`. "
                f"Expected one of {allowed}. Received: "
                f"reduction={reduction}"
            )
E           ValueError: Invalid value for argument `reduction`. Expected one of {None, 'sum_over_batch_size', 'none', 'sum', 'mean', 'mean_with_sample_weight'}. Received: reduction=auto

/local/data0/moved_data/publishablew/deepchem/deepchem/venv/lib/python3.11/site-packages/keras/src/losses/loss.py:111: ValueError
=========================== short test summary info ============================
FAILED ../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_poisson_loss_tf
========================= 1 failed, 35 passed in 5.49s =========================


Initial Result:
============================= test session starts ==============================
platform linux -- Python 3.11.10, pytest-8.3.4, pluggy-1.5.0 -- /local/data0/moved_data/publishablew/deepchem/deepchem/venv/bin/python3
cachedir: .pytest_cache
rootdir: /local/data0/moved_data/publishablew/deepchem/deepchem
configfile: setup.cfg
plugins: flaky-3.8.1
collecting ... collected 36 items

../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_GlobalMutualInformation_pytorch PASSED [  2%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_LocalInformation_pytorch PASSED [  5%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_NTXentMultiplePositives_loss PASSED [  8%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_ShannonEntropy_pytorch PASSED [ 11%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_ShannonEntropy_tf PASSED [ 13%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_VAE_ELBO_pytorch PASSED [ 16%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_VAE_ELBO_tf PASSED [ 19%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_VAE_KLDivergence_pytorch PASSED [ 22%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_VAE_KLDivergence_tf PASSED [ 25%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_binary_cross_entropy_pytorch PASSED [ 27%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_binary_cross_entropy_tf PASSED [ 30%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_categorical_cross_entropy_pytorch PASSED [ 33%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_categorical_cross_entropy_tf PASSED [ 36%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_deep_graph_infomax_loss PASSED [ 38%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_get_negative_expectation PASSED [ 41%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_get_positive_expectation PASSED [ 44%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_graph_context_pred_loss PASSED [ 47%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_grover_pretrain_loss PASSED [ 50%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_hinge_loss_pytorch PASSED [ 52%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_hinge_loss_tf PASSED [ 55%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_huber_loss_pytorch PASSED [ 58%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_huber_loss_tf PASSED [ 61%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_l1_loss_pytorch PASSED [ 63%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_l1_loss_tf PASSED [ 66%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_l2_loss_pytorch PASSED [ 69%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_l2_loss_tf PASSED [ 72%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_poisson_loss_pytorch PASSED [ 75%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_poisson_loss_tf FAILED [ 77%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_sigmoid_cross_entropy_pytorch PASSED [ 80%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_sigmoid_cross_entropy_tf PASSED [ 83%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_softmax_cross_entropy_pytorch PASSED [ 86%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_softmax_cross_entropy_tf PASSED [ 88%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_sparse_softmax_cross_entropy_pytorch PASSED [ 91%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_sparse_softmax_cross_entropy_tf PASSED [ 94%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_squared_hinge_loss_pytorch PASSED [ 97%]
../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_squared_hinge_loss_tf PASSED [100%]

=================================== FAILURES ===================================
_______________________ TestLosses.test_poisson_loss_tf ________________________

self = <deepchem.models.tests.test_losses.TestLosses testMethod=test_poisson_loss_tf>

    @pytest.mark.tensorflow
    def test_poisson_loss_tf(self):
        """Test PoissonLoss."""
        loss = losses.PoissonLoss()
        outputs = tf.constant([[0.1, 0.8], [0.4, 0.6]])
        labels = tf.constant([[0.0, 1.0], [1.0, 0.0]])
>       result = loss._compute_tf_loss(outputs, labels).numpy()

/local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py:131: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/losses.py:150: in _compute_tf_loss
    loss = tf.keras.losses.Poisson(reduction='auto')
/local/data0/moved_data/publishablew/deepchem/deepchem/venv/lib/python3.11/site-packages/keras/src/losses/losses.py:570: in __init__
    super().__init__(poisson, name=name, reduction=reduction, dtype=dtype)
/local/data0/moved_data/publishablew/deepchem/deepchem/venv/lib/python3.11/site-packages/keras/src/losses/losses.py:23: in __init__
    super().__init__(name=name, reduction=reduction, dtype=dtype)
/local/data0/moved_data/publishablew/deepchem/deepchem/venv/lib/python3.11/site-packages/keras/src/losses/loss.py:48: in __init__
    self.reduction = standardize_reduction(reduction)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

reduction = 'auto'

    def standardize_reduction(reduction):
        allowed = {
            "sum_over_batch_size",
            "sum",
            None,
            "none",
            "mean",
            "mean_with_sample_weight",
        }
        if reduction not in allowed:
>           raise ValueError(
                "Invalid value for argument `reduction`. "
                f"Expected one of {allowed}. Received: "
                f"reduction={reduction}"
            )
E           ValueError: Invalid value for argument `reduction`. Expected one of {None, 'none', 'sum', 'mean_with_sample_weight', 'sum_over_batch_size', 'mean'}. Received: reduction=auto

/local/data0/moved_data/publishablew/deepchem/deepchem/venv/lib/python3.11/site-packages/keras/src/losses/loss.py:111: ValueError
=========================== short test summary info ============================
FAILED ../../../../../../local/data0/moved_data/publishablew/deepchem/deepchem/deepchem/models/tests/test_losses.py::TestLosses::test_poisson_loss_tf
========================= 1 failed, 35 passed in 5.53s =========================
